{% extends "base.html" %}

{% block title %}Error - Azure Resource Inventory{% endblock %}

{% block content %}
<div class="row justify-content-center" style="margin-top: 5rem;">
    <div class="col-md-6">
        <div class="card">
            <div class="card-body text-center p-5">
                <i class="bi bi-exclamation-triangle-fill text-danger" style="font-size: 4rem;"></i>
                <h3 class="mt-4 mb-3">Authentication Error</h3>
                <p class="text-muted">An error occurred during authentication.</p>
                
                {% if error and (error.error_description or (error|tojson)) and ("AADSTS7000215" in (error.error_description|default('')|string) or "invalid client secret" in (error.error_description|lower)) %}
                <div class="alert alert-warning text-start mt-4">
                    <strong>Invalid client secret</strong>
                    <p class="mb-2">This often happens if you used the <em>Secret ID</em> (GUID) instead of the secret <em>Value</em>.</p>
                    <ol class="mb-2 text-start">
                        <li>Azure Portal → Azure Active Directory → App registrations → Your app</li>
                        <li>Certificates & secrets → Create a new client secret if needed</li>
                        <li>Copy the <strong>Value</strong> column and set it as <code>AZURE_CLIENT_SECRET</code></li>
                        <li>Restart the application</li>
                    </ol>
                </div>
                {% endif %}
                
                {% if error %}
                <div class="alert alert-danger text-start mt-4">
                    <strong>Error Details:</strong>
                    <pre class="mb-0 mt-2">{{ error }}</pre>
                </div>
                {% endif %}
                
                <a href="/login" class="btn btn-primary mt-4">
                    <i class="bi bi-arrow-clockwise"></i> Try Again
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
